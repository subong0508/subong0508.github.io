---
layout: post
title: JSP 정리
date:  2021-1-28
author: Jung Jaeeun
categories: Backend
tags: backend server jsp servlet
comments: true
---

**본 게시글은 인프런 강좌([링크](https://www.inflearn.com/course/%EC%8B%A4%EC%A0%84-jsp_renew/dashboard))를 듣고 요약한 글입니다.**

## Servlet 맵핑
### Servlet 맵핑이란?

유저가 full path를 입력하는 것은 번거롭고 보안에 취약하다. 따라서 mapping path를 만들어서 간결한 닉네임을 준다. 이 기법을 **Servlet 맵핑**이라고 부른다.

### web.xml 파일을 이용한 맵핑

Servlet 파일이 다음과 같다고 하자.

```java
package com.servlet;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/HelloServlet")
public class HelloServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
    public HelloServlet() {
        super();
    }

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		PrintWriter out = response.getWriter();
		out.println("<html>");
		out.print("<head>");
		out.print("</head>");
		out.print("<p>Hello Servlet!</p>");
		out.print("</html>");
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		doGet(request, response);
	}

}
```

web.xml 파일을 다음과 같이 바꿔보자.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" id="WebApp_ID" version="3.1">
  <display-name>prj5</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
   <!-- 가명 -->
  	<servlet-name>servletEx</servlet-name>
  	<servlet-class>com.servlet.HelloServlet</servlet-class>
  </servlet>
  <servlet-mapping>
  <servlet-name>servletEx</servlet-name>
  <url-pattern>/SE</url-pattern>
  </servlet-mapping>
</web-app>
```

이 방법은 ```com.sevlet``` 패키지 안에 있는 ```HelloServlet.java``` 파일에 ```servletEx```라는 가명을 붙여주고 url을 ```/SE```로 바꾼 과정이다.

[http://localhost:포트번호/프로젝트이름/SE]()로 가면 
잘 작동되었음을 알 수 있다.

### Java Annotation을 이용한 맵핑

또는 간단하게 직접 java파일을 바꿔줄 수 있다.

```java
package com.servlet;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;


@WebServlet("/SE1")
public class HelloServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
    public HelloServlet() {
        super();
    }

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		PrintWriter out = response.getWriter();
		out.println("<html>");
		out.print("<head>");
		out.print("</head>");
		out.print("<p>Hello Servlet!</p>");
		out.print("</html>");
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		doGet(request, response);
	}

}
```

이렇게 하면 [http://localhost:포트번호/프로젝트이름/SE1]()로도 같은 페이지에 접근가능하다.

## Servlet request, response

### HttpServlet

```HttpServlet```을 상속받아 http 프로토콜을 이용한다.

### HttpServletRequest, HttpServletResponse

```doGet, doPost``` 모두 ```HttpServletRequest, HttpServletResponse```를 파라미터로 받는다. ```request```는 요청에 대한 정보를 담고 있는 객체, ```response```는 응답에 대한 정보를 담고 있는 객체이다.

<```request```의 주요 메소드>

- ```request.getCookies()```
- ```request.getSession()```
- ```request.getAttribute(null)```
- ```request.setAttribute(null, null)```
- ```request.getParameter(null)```
- ```request.getParameterNames()```
- ```request.getParameterValues(null)```

<```response```의 주요 메소드>

- ```response.addCookie(null)```
- ```response.getStatus()```
- ```response.sendRedirect(null)```
- ```response.getWriter()```
- ```response.getOutputStream()```

## Servlet Life-Cycle
